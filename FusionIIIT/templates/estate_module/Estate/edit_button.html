<button class="ui red button edit_{{ menuitem }}_{{ estate.id }}">Edit</button>
<script>
    $('.coupled_{{ menuitem }}.modal')
        .modal({
            allowMultiple: true
        });

    $('.delete_{{ menuitem }}.modal')
        .modal('attach events',
            '.edit_{{ menuitem }}.modal .delete_{{ menuitem }}.button');

    $('.edit_{{ menuitem }}_{{ estate.id }}.button').on('click', function () {
        $('.edit_{{ menuitem }}.modal')
            .modal({
                onShow: function () {
                    // change edit modal header
                    $('.edit_{{ menuitem }}.modal .header').first()
                        .text("{{ estate.name }}");
                    // change modal form action url
                    $('.edit_{{ menuitem }}.modal form')
                        .attr("action", "{% url 'edit_estate' estate.id %}");
                    // change delete modal message
                    $('.delete_{{ menuitem }}.modal .content p')
                        .text("Are you sure you want to delete {{ estate.name }}?");
                    // change delete form action url
                    $('.delete_{{ menuitem }}.modal form')
                        .attr("action", "{% url 'delete_estate' estate.id %}");
                    // prefill form
                    $('.edit_{{ menuitem }}.modal #id_name')
                        .val("{{ estate.name }}");
                    $('.edit_{{ menuitem }}.modal #id_dateIssued')
                        .val("{{ estate.dateIssued|date:'Y-m-d' }}");
                    $('.edit_{{ menuitem }}.modal #id_dateConstructionStarted')
                        .val("{{ estate.dateConstructionStarted|date:'Y-m-d' }}");
                    $('.edit_{{ menuitem }}.modal #id_dateConstructionCompleted')
                        .val("{{ estate.dateConstructionCompleted|date:'Y-m-d' }}");
                    $('.edit_{{ menuitem }}.modal #id_dateOperational')
                        .val("{{ estate.dateOperational|date:'Y-m-d' }}");
                    $('.edit_{{ menuitem }}.modal #id_area')
                        .val("{{ estate.area }}");
                    $('.edit_{{ menuitem }}.modal #id_constructionCostEstimated')
                        .val("{{ estate.constructionCostEstimated }}");
                    $('.edit_{{ menuitem }}.modal #id_constructionCostActual')
                        .val("{{ estate.constructionCostActual }}");
                    $('.edit_{{ menuitem }}.modal #id_numRooms')
                        .val("{{ estate.numRooms }}");
                    $('.edit_{{ menuitem }}.modal #id_numWashrooms')
                        .val("{{ estate.numWashrooms }}");
                    $('.edit_{{ menuitem }}.modal #id_remarks')
                        .val("{{ estate.remarks }}");
                }
            })
            .modal('show');
    });
</script>