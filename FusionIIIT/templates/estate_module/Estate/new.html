<button class="ui right labeled icon blue new_{{ menuitem }} button">
    <i class="plus icon"></i>
    New
</button>

<div class="ui modal new_{{ menuitem }}">
    <div class="header">
        New {{menuitem }}
    </div>
    <div class="scrolling content">
        <h4 class="ui horizontal divider header">
            <i class="info circle icon"></i>
            Main Information
        </h4>

        <form action="{% url 'new_estate' %}" id="new_{{ menuitem }}_form" class="ui form" method="POST" novalidate>
            <div class="ui error message"></div>
            {% include 'estate_module/'|add:menuitem|add:'/form.html' %}
        </form>

    </div>
    <div class="actions">
        {% comment %} <button form="XYZ" class="ui large primary submit button">Submit</button> {% endcomment %}
        <button type="submit" form="new_{{ menuitem }}_form" class="ui large right labeled icon green button">Create
            <i class="checkmark icon"></i></button>
        <div class="ui black deny large button">
            Cancel
        </div>

        <script>
            $('#new_{{ menuitem }}_form')
                .form({
                    fields: {
                        name: {
                            identifier: 'name',
                            rules: [{
                                type: 'empty',
                                prompt: 'Estate name cannot be blank'
                            }]
                        },
                        dateIssued: {
                            identifier: 'dateIssued',
                            rules: [{
                                type: 'empty',
                                prompt: 'Date Issued cannot be blank'
                            }]
                        },
                        constructionCostEstimated: {
                            identifier: 'constructionCostEstimated',
                            optional: true,
                            rules: [{
                                type: 'integer',
                                prompt: 'Estimated Construction Cost must be an integer'
                            }]
                        },
                        constructionCostActual: {
                            identifier: 'constructionCostActual',
                            optional: true,
                            rules: [{
                                type: 'integer',
                                prompt: 'Actual Construction Cost must be an integer'
                            }]
                        },
                        area: {
                            identifier: 'area',
                            optional: true,
                            rules: [{
                                type: 'integer',
                                prompt: 'Area must be an integer'
                            }]
                        },
                        numRooms: {
                            identifier: 'numRooms',
                            optional: true,
                            rules: [{
                                type: 'integer',
                                prompt: 'Number of rooms must be an integer'
                            }]
                        },
                        numWashrooms: {
                            identifier: 'numWashrooms',
                            optional: true,
                            rules: [{
                                type: 'integer',
                                prompt: 'Number of washrooms must be an integer'
                            }]
                        },

                    }
                });
        </script>
    </div>
</div>
<script>
    $('.new_{{ menuitem }}.modal')
        .modal('attach events', '.new_{{ menuitem }}.button', 'show');
</script>

{% comment %}

<div class="ui modal new">
    <i class="close icon"></i>
    <div class="header">
        New Building
    </div>
    <div class="ui vertical segment">
        <form class="ui form" method="POST" style="padding: 8px; padding-left: 24px; padding-right: 24px;">
            {% include 'estate/estate_form.html' %}

            <input type="button" id="amb_submit" name="amb_submit" value="Create"
                class="ui submit large primary button" />

        </form>
        <script type="text/javascript">
        </script>

    </div>
</div>

{{ buildings|json_script:"buildings-data" }}

<script>
    $('.new.button').on('click', function () {
        //const id = Number($(this).attr("data-id"));
        //const id = e.target.attributes["data-id"].nodeValue;
        //const estate = JSON.parse(document.getElementById('buildings-data').textContent)[id];

        $('.new.modal')
            .modal({
                onShow: function () {
                    /*
                    $('.edit.modal .header')
                        .text(estate.name);
                    $('.edit.modal #building_name').val(estate.name);
                    $('.edit.modal #estd_cost').val(estate.amount);
                    */
                }
            })
            .modal('show');
    });
</script>

{% endcomment %}