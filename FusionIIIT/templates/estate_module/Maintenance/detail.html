{% load humanize %}

<button class="ui secondary button details {{ menuitem }}_{{ work.id }}">Details</button>
<div class="ui modal details {{ menuitem }}_{{ work.id }}">
    <div class="header">
        {{ work.name }}
    </div>
    <div class="scrolling content">
        <div class="description">
            <h4 class="ui horizontal divider header">
                <i class="bar chart icon"></i>
                Specifications

            </h4>
            <div class="ui two column centered grid">
                <div class="ten wide column">
                    <table class="ui definition table">
                        <tbody>
                            <tr>
                                <td class="six wide column">Name of work</td>
                                <td class="name">{% if work.name %} {{ work.name }} {% endif %}</td>
                            </tr>

                            <tr>
                                <td>Type of work</td>
                                <td class="workType">{% if work.workType %} {{ work.get_workType_display }} {% endif %}
                                </td>
                            </tr>

                            <tr>
                                <td>Estate</td>
                                <td class="estate">
                                    {% if work.estate %}

                                    {{ work.estate }}
                                    &nbsp;
                                    <button
                                        class="ui secondary mini button details Estate_{{ work.estate.id }}">Details</button>
                                    {% endif %}
                                </td>


                            </tr>

                            <tr>
                                <td>Name of contractor</td>
                                <td class="contractorName">{% if work.contractorName %} {{ work.contractorName }}
                                    {% endif %}
                                </td>
                            </tr>

                            <tr>
                                <td>Date Issued</td>
                                <td class="dateIssued">{% if work.dateIssued %} {{ work.dateIssued }} {% endif %}</td>
                            </tr>

                            <tr>
                                <td>Date Started</td>
                                <td class="dateStarted">{% if work.dateStarted %} {{ work.dateStarted }} {% endif %}
                                </td>
                            </tr>

                            <tr>
                                <td>Date Completed</td>
                                <td class="dateCompleted">{% if work.dateCompleted %} {{ work.dateCompleted }}
                                    {% endif %}</td>
                            </tr>

                            <tr>
                                <td>Estimated cost</td>
                                <td class="costEstimated">
                                    {% if work.costEstimated %}₹&nbsp;{{ work.costEstimated|intcomma }}
                                    {% endif %}
                                </td>
                            </tr>

                            <tr>
                                <td>Actual cost</td>
                                <td class="costActual">{% if work.costActual %}₹&nbsp;{{ work.costActual|intcomma }}
                                    {% endif %}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            {% if work.remarks %}
            <h4 class="ui horizontal divider header">
                <i class="sticky note icon"></i>
                Remarks
            </h4>
            <div class="ui two column centered grid">
                <div class="ten wide column">
                    <p>{{ work.remarks }}</p>
                </div>
            </div>
            {% endif %}

            {% comment %} <h4 class="ui horizontal divider header">
                <i class="wrench icon"></i>
                Sub Work
            </h4>
            {% for work in work.work_set.all %}
            <table class="ui definition table">
                <tbody>
                    <tr>
                        <td class="three wide column">name</td>
                        <td class="name">{% if work.name %} {{ work.name }} {% endif %}</td>
                    </tr>

                    <tr>
                        <td>dateIssued</td>
                        <td class="dateIssued">{% if work.dateIssued %} {{ work.dateIssued }} {% endif %}</td>
                    </tr>
                </tbody>
            </table>
            {% empty %}
            <p>No sub works found for {{ work.name }}</p>
            {% endfor %} {% endcomment %}

        </div>
    </div>
    <div class="actions">
        <div class="ui black deny large button">
            Close
        </div>
    </div>
</div>
<script>
    $('.{{ menuitem }}_{{ work.id }}.details.modal')
        .modal('attach events', '.{{ menuitem }}_{{ work.id }}.details.button',
            'show');
</script>