{% load static %}
{% block messbill %}

    {% comment %}The tab menu starts here!{% endcomment %}
    <div class="ui pointing secondary menu">
        <a class="ui active item" data-tab="bills">
            Monthly Bill
        </a>
        <a class="item" data-tab="messpayment">
            Payment
        </a>
    </div>


<div class="ui active tab" data-tab="bills" id="messmonthlybill">
    <div class="ui vertical segment">
         <form method="post" >
             {% csrf_token %}
             <div class="ui form" style="padding: 8px; padding-left: 24px; padding-right: 24px;">
                    <div class="two fields">
                        <div class="field">
                            <label>Enter bill amount for the current month</label>
                        </div>
                    </div>

                     <div class="field">
                        <label>Monthly Bill Amount</label>
                        <input min="0" max="2500" id="amount" name="amount" required="true">
                    </div>

                    <div class="field">
                        <button class="ui primary button right floated" type="submit" name="submit" onclick="return updatecost()">
                            Submit
                        </button>
                    </div>
             </div>
         </form>

        <form method="post" >
             {% csrf_token %}
             <div class="ui form" style="padding: 8px; padding-left: 24px; padding-right: 24px;">
                    <div class="field">
                        <label>Generate Bill for this month</label>
                        <button class="ui primary button right floated" type="submit" name="billgenerate" onclick="return billgenerate()">
                            Submit
                        </button>
                    </div>
             </div>
         </form>
    </div>
</div>

<div class="ui divider"></div>

{% endblock %}
{% block javascript %}
<script type="text/javascript" src="{% static 'globals/js/jquery.min.js' %}"></script>

 <script>
        function updatecost(){
            $.ajax({
                type: 'POST',
                url: 'updatecost/',
                dataType: 'json',
                data: {
                    'csrfmiddlewaretoken' : '{{ csrf_token }}',
                    'amount': $("#amount").val()
                    <!--'month':$("#month").val()-->
                },
                success: function(data) {
                    if(data.status){
                        alert("Data Inserted Successfully");
                        $("#messmonthlybill").load(location.href+" #messmonthlybill>*","")
                    }
                },
                error: function(data, err) {
                    alert(err.message);
                }
            });
        return false;
    }
     function billgenerate(){
            $.ajax({
                type: 'POST',
                url: 'billgenerate/',
                dataType: 'json',
                data{
                }
                success: function(data) {
                    if(data.status){
                        alert("Data Inserted Successfully");
                        $("#messmonthlybill").load(location.href+" #messmonthlybill>*","")
                    }
                },
                error: function(data, err) {
                    alert(err.message);
                }
            });
        return false;
    }



</script>
{% endblock %}
